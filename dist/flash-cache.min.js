!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.flashCache=t():e.flashCache=t()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}var i=r(1),u=n(i),c=r(2),s={expireIn:6e4,compressStrings:!0};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=Object.create(null),r=Object.create(null);return{_cache:r,_config:Object.assign({},e),put:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";r[n]&&this.remove(n,!0);var i={value:o,time:Date.now()},c=e.compressStrings,s=e.expireIn;return c&&"string"==typeof o&&(i._compressed=!0,i.value=u.default.compress(o)),s&&(i.expiryAt=i.time+s,i._expirer=setTimeout(function(){t.emit("expiry",{key:n,data:r[n]}),t.remove(n,!0)},s)),r[n]=i,this.emit("add",{key:n,data:r[n]}),r[n]},get:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=r[e];if(t){var n=(t._expirer,t._compressed),i=o(t,["_expirer","_compressed"]);return i=Object.assign({},i),n&&(i.value=u.default.decompress(i.value)),this.emit("get",{key:e,data:i}),i}return null},remove:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=r[e];if(n){var o=n._expirer;return(0,c.isExisty)(o)&&clearTimeout(o),delete r[e],this.emit("remove",{key:e,expired:t}),!0}return!1},clear:function(){return r=Object.create(null),this.emit("clear",{}),!0},on:function(e,r){"function"==typeof r&&(t[e]||(t[e]=[])).push(r)},off:function(e,r){t[e]&&t[e].splice(t[e].indexOf(r)>>>0,1)},emit:function(e,r){(t[e]||[]).map(function(e){e(r)}),(t["*"]||[]).map(function(t){t(e,r)})}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={compress:function(e){var t=void 0,r={},n=void 0,o=void 0,i="",u=[],c=256;for(t=0;t<256;t+=1)r[String.fromCharCode(t)]=t;for(t=0;t<e.length;t+=1)n=e.charAt(t),o=i+n,r.hasOwnProperty(o)?i=o:(u.push(r[i]),r[o]=c++,i=String(n));return""!==i&&u.push(r[i]),u},decompress:function(e){var t=void 0,r=[],n=void 0,o=void 0,i=void 0,u="",c=256;for(t=0;t<256;t+=1)r[t]=String.fromCharCode(t);for(n=String.fromCharCode(e[0]),o=n,t=1;t<e.length;t+=1){if(i=e[t],r[i])u=r[i];else{if(i!==c)return null;u=n+n.charAt(0)}o+=u,r[c++]=n+u.charAt(0),n=u}return o}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.isExisty=function(e){return null!==e&&void 0!==e}}])});
//# sourceMappingURL=flash-cache.min.js.map
