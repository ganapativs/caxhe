{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 5d4348f05cf100bb20f1","webpack:///./src/flash-cache.js","webpack:///./src/listeners.js","webpack:///./src/events.js","webpack:///./src/addToExpiryQueue.js"],"names":["_defaultConfig","defaultExpiryIn","module","exports","flashCache","config","_cache","Object","create","_expiryFn","key","data","emit","FC_EXPIRY","remove","put","value","expiryIn","__cache__","time","Date","now","expiryAt","bind","FC_ADD","get","nCache","assign","FC_GET","isExpired","FC_REMOVE","expired","getConfig","getAll","FC_GET_ALL","clearAll","FC_CLEAR","on","off","_listeners","type","listener","push","splice","indexOf","map","handler","Events","isExisty","val","undefined","_timers","_expiryTimerInstance","_cleanUpTimers","k","hasOwnProperty","_checkExpired","keys","remainingExpiries","length","isTimerActive","clearInterval","setInterval","_addToExpiryQueue","expiryFn","deleteTimerAtKey"],"mappings":"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","file":"flash-cache.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"flashCache\"] = factory();\n\telse\n\t\troot[\"flashCache\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 5d4348f05cf100bb20f1\n **/","/**\n * Created by Ganapati on 5/14/17\n *\n * flash-cache: Ultra fast in-memory cache\n */\n\nimport {on, off, emit} from './listeners';\nimport Events from './events';\nimport addToExpiryQueue, {deleteTimerAtKey} from './addToExpiryQueue';\n\nlet _defaultConfig = {\n    // Default cache expiry time, 60000ms(60s) by default\n    // Set `false` to disable expiry(This beats the purpose of cache)\n    // `0` will be treated as `false`\n    defaultExpiryIn: 60000\n};\n\n/**\n * flash-cache: Ultra fast in-memory cache\n */\nmodule.exports = function flashCache(config = _defaultConfig) {\n    let _cache = Object.create(null);\n\n    return {\n        /**\n         * Remove value from cache and trigger expiry event\n         *\n         * Exposing here to prevent creation of multiple function instances\n         * */\n        _expiryFn(key, data) {\n            // Trigger `FC_EXPIRY` event\n            this.emit(Events.FC_EXPIRY, {key, data});\n\n            this.remove(key, true);\n        },\n\n        /**\n         * Put data into cache\n         *\n         * @param {String} key  Cache key\n         * @param {String|Object} value Value to be stored against cache key\n         * @param {Number} expiryIn Expiry time for the key, defaults to defaultExpiryIn\n         * */\n        put(key = '', value = '', expiryIn = config.defaultExpiryIn) {\n            // Remove existing values in the key, if any\n            if (_cache[key]) {\n                this.remove(key, true);\n            }\n\n            let __cache__ = {\n                value,\n                time: Date.now()\n            };\n\n            __cache__.value = value;\n\n            // Ignore all falsy values(like `0` & `false`)\n            // Basically if there is no expiry, cache will act as simple in-memory data store\n            if (expiryIn) {\n                // Store timeout, might be required for later use\n                __cache__.expiryAt = __cache__.time + expiryIn;\n            }\n\n            _cache[key] = __cache__;\n\n            // If expiry time exists, add to expiry queue\n            if (__cache__.expiryAt) {\n                // Remove the cache after expiry time\n                addToExpiryQueue(__cache__.expiryAt, key, this._expiryFn.bind(this, key, _cache[key]));\n            }\n\n            // Trigger `FC_ADD` event\n            this.emit(Events.FC_ADD, {key, data: _cache[key]});\n\n            return _cache[key];\n        },\n\n        /**\n         * Get data from cache\n         *\n         * @param {String} key  Cache key\n         * */\n        get(key = '') {\n            let __cache__ = _cache[key];\n\n            if (__cache__) {\n                // Make a new copy of cache\n                // Note: this won't remove nested references\n                let nCache = Object.assign({}, __cache__);\n\n                // Trigger `FC_GET` event\n                this.emit(Events.FC_GET, {key, data: nCache});\n\n                return nCache;\n            }\n\n            return null;\n        },\n\n        /**\n         * Remove data/Invalidate from cache\n         *\n         * @param {String} key  Cache key to be removed\n         * @param {Boolean} isExpired  Boolean to indicate whether cache is removed by expiry timeout\n         * */\n        remove(key, isExpired = false) {\n            let __cache__ = _cache[key];\n\n            if (__cache__) {\n                let {expiryAt} = __cache__;\n\n                // If timer exists for the key, remove it\n                deleteTimerAtKey(expiryAt, key);\n\n                // Remove key & value from cache\n                delete _cache[key];\n\n                // Trigger `FC_REMOVE` event\n                this.emit(Events.FC_REMOVE, {key, expired: isExpired});\n\n                return true;\n            }\n\n            return false;\n        },\n\n        /**\n         * Get current cache configuration\n         * */\n        getConfig() {\n            return Object.assign({}, config);\n        },\n\n        /**\n         * Get entire cache\n         * */\n        getAll() {\n            // Trigger `FC_GET_ALL` event\n            this.emit(Events.FC_GET_ALL, _cache);\n\n            return _cache;\n        },\n\n        /**\n         * Clear entire cache\n         * */\n        clearAll() {\n            _cache = Object.create(null);\n\n            // Trigger `FC_CLEAR` event\n            this.emit(Events.FC_CLEAR, {});\n\n            return true;\n        },\n\n        /**\n         * Event listeners\n         * */\n        on,\n        off,\n        emit\n    }\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/flash-cache.js\n **/","/**\n * Created by Ganapati on 6/24/17\n *\n * Event listeners\n */\n\nlet _listeners = Object.create(null);\n\n/**\n * Add cache event listener\n * Snippet borrowed from @developit/mitt\n *\n * @param {String} type  Event to register, Eg: add, remove, expiry\n * @param {String|Object} listener Function to be called on event\n * */\nexport let on = (type, listener) => {\n    if (typeof listener === 'function') {\n        (_listeners[type] || (_listeners[type] = [])).push(listener);\n    }\n};\n\n/**\n * Remove cache event listener\n * Snippet borrowed from @developit/mitt\n *\n * @param {String} type  Event to un register, Eg: add, remove, expiry\n * @param {String|Object} listener function to remove\n * */\nexport let off = (type, listener) => {\n    if (_listeners[type]) {\n        _listeners[type].splice(_listeners[type].indexOf(listener) >>> 0, 1);\n    }\n};\n\n/**\n * Emit data to cache event listeners\n * Snippet borrowed from @developit/mitt\n *\n * @param {String} type  Event to be emited\n * @param {String|Object} data to pass to listener function\n * */\nexport let emit = (type, data) => {\n    (_listeners[type] || []).map((handler) => {\n        handler(data);\n    });\n    (_listeners['*'] || []).map((handler) => {\n        handler(type, data);\n    });\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/listeners.js\n **/","/**\n * Created by guns on 13/07/17.\n *\n * All events triggered\n */\n\nlet Events = {\n    FC_EXPIRY: 'fc-expiry',\n    FC_ADD: 'fc-add',\n    FC_GET: 'fc-get',\n    FC_GET_ALL: 'fc-get-all',\n    FC_REMOVE: 'fc-remove',\n    FC_CLEAR: 'fc-clear',\n};\n\nexport default Events;\n\n\n/** WEBPACK FOOTER **\n ** ./src/events.js\n **/","/**\n * Created by Ganapati on 7/05/17\n *\n * Timers - Expire cache on time(on regular intervals)\n */\n\n/**\n * Check if variable has some value\n * */\nlet isExisty = (val) => val !== null && val !== undefined;\n\n/**\n * Store each key's expiry functions in _timers[expiryAt][key]\n * */\nlet _timers = {};\nlet _expiryTimerInstance = null;\n\n/**\n * Expire all keys at time(key) - _timers[time] & remove key from _timers\n * */\nlet _cleanUpTimers = (key) => {\n    if (_timers[key]) {\n        for (let k in _timers[key]) {\n            if (_timers[key].hasOwnProperty(k)) {\n                _timers[key][k]();\n            }\n        }\n        delete _timers[key];\n    }\n};\n\n/**\n * Check for keys expiry each 1 millisecond unless all keys are expired\n *\n * Cleanup current + old keys(If any)\n *\n * If no keys exists to expire, stop timer or if timer is not started, attach timer\n * */\nlet _checkExpired = () => {\n    let keys = Object.keys(_timers);\n    let remainingExpiries = keys.length;\n    let now = Date.now();\n    let isTimerActive = isExisty(_expiryTimerInstance);\n\n    keys.map(k => {\n        if (k <= now) {\n            _cleanUpTimers(k);\n            remainingExpiries -= 1;\n        }\n    });\n\n    if (!remainingExpiries) {\n        clearInterval(_expiryTimerInstance);\n        _expiryTimerInstance = null;\n    }\n    else if (!isTimerActive) {\n        _expiryTimerInstance = setInterval(_checkExpired, 1);\n    }\n};\n\n/**\n * Add expiryFn to _timers[expiryAt][key] & start timer if timer not attached\n * */\nlet _addToExpiryQueue = (expiryAt, key, expiryFn) => {\n    if (!_timers[expiryAt]) {\n        _timers[expiryAt] = {};\n    }\n    _timers[expiryAt][key] = expiryFn;\n    _checkExpired();\n};\n\nexport let deleteTimerAtKey = (expiryAt, key) => {\n    if (_timers[expiryAt][key]) {\n        delete _timers[expiryAt][key];\n    }\n};\n\nexport default _addToExpiryQueue;\n\n\n/** WEBPACK FOOTER **\n ** ./src/addToExpiryQueue.js\n **/"],"sourceRoot":""}